<?xml-stylesheet type="text/xsl"?>

<!-- Test Troilkatt setup by running a few test jobs -->
<dataset>		
	<source>
		<name>test_source</name>
		<type>list_dir</type>
	    <arguments>/user/larsab/bigmem/</arguments>
	    <output-directory></output-directory>
	    <compression-format></compression-format>
	    <storage-time>-1</storage-time>	    
	    <description>Read in files from the HDFS directory specified in arguments. This
	    directory should have a couple of PCL files. </description>    
	</source>
	
	<pipeline>	

	    <stage>
			<name>test_bigmem</name>
			<type>mapreduce_stage</type>
			<arguments>execute_per_file 12000 15000 /usr/bin/python TROILKATT.SCRIPTS/bigmem.py TROILKATT.INPUT_FILE</arguments>
			<output-directory>test/bigmem</output-directory>
			<compression-format>gz</compression-format>
			<storage-time>-1</storage-time>
			<description>Filter out any non-pcl files.</description>						
		</stage>
<!--
	    <stage>
			<name>test_bigmem</name>
			<type>mapreduce</type>
			<arguments>TROILKATT.JAR edu.princeton.function.troilkatt.mapreduce.BigMem 16000 20000</arguments>
			<output-directory>test/bigmem</output-directory>
			<compression-format>gz</compression-format>
			<storage-time>-1</storage-time>
			<description>Filter out any non-pcl files.</description>						
		</stage>
-->
	</pipeline>
	
	<sink>
		<name>test_sink</name>
		<type>copy_to_local</type>
		<arguments>/tmp/test/output</arguments>
		<description>Copy MapReduce output files to the local FS.</description>
	</sink>
				
</dataset>
